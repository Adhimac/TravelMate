<!DOCTYPE html>
{% load static %}
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>TravelMate — Find Co-Travellers</title>

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">

  <style>
    :root{
      --primary:#1e3a8a;
      --accent-start:#ff5a5f;
      --accent-end:#ff9f43;
    }
    .btn-accent{
      background:linear-gradient(90deg,var(--accent-start),var(--accent-end));
      color:white;
      box-shadow:0 8px 24px rgba(255,90,95,0.12);
    }
    /* subtle card hover */
    .card-hover:hover { transform: translateY(-6px); box-shadow: 0 18px 40px rgba(2,6,23,0.08); }
  </style>
</head>

<body class="antialiased bg-gray-50 text-gray-800">
  <!-- NOTIFICATION HEADER -->
<header class="bg-white border-b sticky top-0 z-40">
  <div class="max-w-7xl mx-auto px-6 py-4 flex justify-between items-center">

    <!-- Logo -->
    <a href="/" class="font-bold text-lg text-[var(--primary)]">
      TravelMate
    </a>

    <!-- Notification Icon -->
    <div class="relative">
      <a href="notification" class="relative inline-flex items-center">

        <!-- Bell Icon -->
        <svg xmlns="http://www.w3.org/2000/svg"
             class="w-6 h-6 text-gray-700 hover:text-[var(--primary)]"
             fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11
                   c0-3.07-1.63-5.64-4.5-6.32V4a1.5 1.5 0 00-3 0v.68
                   C7.63 5.36 6 7.92 6 11v3.159
                   c0 .538-.214 1.055-.595 1.436L4 17h5" />
        </svg>

        <!-- Badge -->
        {% if pending_requests_count > 0 %}
        <span class="absolute -top-2 -right-2 bg-red-500 text-white text-xs
                     w-5 h-5 rounded-full flex items-center justify-center">
          {{ pending_requests_count }}
        </span>
        {% endif %}

      </a>
    </div>

  </div>
</header>
<!-- END NOTIFICATION HEADER -->


  <!-- HERO -->
  <section class="relative h-72 md:h-96 flex items-center">
    <div class="absolute inset-0">
      <!-- replace this with an AI-generated hero background if you have one -->
      <img src="https://images.unsplash.com/photo-1507525428034-b723cf961d3e?q=80&w=1600&auto=format&fit=crop&ixlib=rb-4.0.3&s=9dfe6ee1f9ff6f3d37fe8f1f2f3e6180"
           class="w-full h-full object-cover filter brightness-75" alt="travel hero" />
      <div class="absolute inset-0 bg-gradient-to-tr from-[rgba(30,58,138,0.45)] to-[rgba(255,90,95,0.12)]"></div>
    </div>

    <div class="relative z-20 max-w-7xl mx-auto px-6">
      <div class="md:flex md:items-center md:justify-between">
        <div class="text-white max-w-2xl">
          <h1 class="text-3xl md:text-4xl lg:text-5xl font-extrabold leading-tight">Find Your Perfect Co-Traveller</h1>
          <p class="mt-3 text-white/90">Connect with like-minded travelers — share routes, split costs, and make your trip unforgettable. Identity verification and community ratings keep journeys safe and friendly.</p>

          <div class="mt-6 flex gap-3 flex-wrap">
            <a href="#explore" class="btn-accent inline-flex items-center px-5 py-3 rounded-lg font-semibold shadow">Explore Profiles</a>
            <a href="/coTraveler" class="inline-flex items-center px-4 py-3 rounded-lg bg-white/90 text-[var(--primary)] font-semibold">How it Works</a>
          </div>
        </div>

        <!-- quick stats (optional) -->
        <div class="hidden md:block text-white text-right">
          <div class="bg-white/10 p-4 rounded-2xl">
            <div class="text-3xl font-bold">12,540+</div>
            <div class="text-sm text-white/80">Verified Travelers</div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- SEARCH & FILTERS -->
  <section id="explore" class="max-w-7xl mx-auto px-6 -mt-10 relative z-10">
    <div class="bg-white rounded-2xl shadow p-6 border">
      <div class="md:flex md:items-center md:gap-6">
        <div class="flex-1">
          <input id="txtSearch" type="text" placeholder="Search by name, city or interest"
                class="w-full border rounded-lg px-4 py-3 focus:outline-none focus:ring-2 focus:ring-indigo-200"/>
        </div>

        <div class="mt-4 md:mt-0 grid grid-cols-2 md:grid-cols-4 gap-3 md:w-2/3">
          <select id="filterDestination" class="border rounded-lg px-3 py-2">
            <option value="">Any Destination</option>
            <option>Goa</option><option>Rishikesh</option><option>Manali</option><option>Kerala</option>
          </select>

          <select id="filterInterest" class="border rounded-lg px-3 py-2">
            <option value="">Any Interest</option>
            <option>Backpacking</option><option>Road Trip</option><option>Beach</option><option>Hiking</option>
          </select>

          <select id="filterGender" class="border rounded-lg px-3 py-2">
            <option value="">Any Gender</option>
            <option>Male</option><option>Female</option><option>Non-binary</option>
          </select>

          <select id="filterAge" class="border rounded-lg px-3 py-2">
            <option value="">Any Age</option>
            <option value="18-25">18–25</option><option value="26-35">26–35</option>
            <option value="36-50">36–50</option><option value="50+">50+</option>
          </select>
        </div>

        <div class="mt-4 md:mt-0 md:w-48 text-right">
          <button id="btnReset" class="px-4 py-3 rounded-lg border">Reset</button>
        </div>
      </div>
    </div>
  </section>

  <!-- PROFILES GRID -->
<section class="max-w-7xl mx-auto px-6 py-10">
  <h2 class="text-2xl font-bold text-[var(--primary)]">Last Added Travelers</h2>
  <p class="text-gray-600 mt-1">
    Browse recent profiles — click view to open full profile and send a request to connect.
  </p>

  <div id="profilesGrid" class="mt-6 grid gap-6 sm:grid-cols-2 lg:grid-cols-3">

    {% for traveler in travelers %}
    <article class="bg-white rounded-2xl border p-5 card-hover transition-transform duration-200"
             data-name="{{ traveler.name }}"
             data-destination="{{ traveler.destination }}"
             data-interest="{{ traveler.interests }}"
             data-gender="{{ traveler.gender }}"
             data-age="{{ traveler.age }}">

      <div class="flex items-center gap-4">
        <img src="{{ traveler.photo.url|default:'https://i.pravatar.cc/120' }}"
             alt="{{ traveler.name }}"
             class="w-24 h-24 rounded-xl object-cover shadow-sm"/>

        <div class="flex-1">
          <div class="flex items-center justify-between">
            <div>
              <h3 class="font-semibold text-lg">{{ traveler.Name }}</h3>
              <div class="text-sm text-gray-500">
                {{ traveler.age }} • {{ traveler.destination }}
              </div>
            </div>
         
          </div>

          <p class="mt-3 text-gray-600 text-sm">
            {{ traveler.bio|truncatewords:18 }}
          </p>

          <div class="mt-4 flex flex-wrap gap-2">
            {% for tag in traveler.interests_list %}
              <span class="text-xs px-3 py-1 rounded-full bg-gray-100">
                {{ tag }}
              </span>
            {% endfor %}
          </div>
        </div>
      </div>

      <div class="mt-4 flex items-center justify-between">
        <div class="text-sm text-gray-500">
          Last active: {{ traveler.last_active|timesince }} ago
        </div>

        <div class="flex items-center gap-2">
          <a href=""
             class="px-3 py-2 rounded-lg border text-sm">
             View
          </a>

          <a href=""
             class="px-3 py-2 rounded-lg btn-accent text-sm">
             Connect
          </a>
        </div>
      </div>
    </article>
    {% empty %}
      <p class="col-span-3 text-center text-gray-500">
        No travelers found.
      </p>
    {% endfor %}

  </div>

  <div class="text-center mt-7">
    <a href="profileList"
       class="px-4 py-2 rounded-lg btn-accent text-white font-semibold shadow-md">
        View All Travelers
    </a>
  </div>
</section>


  <!-- WHY COTRAVEL -->
  <section class="max-w-7xl mx-auto px-6 py-12">
    <div class="grid md:grid-cols-2 gap-8 items-center">
      <div>
        <h2 class="text-3xl font-extrabold text-[var(--primary)]">Why Travel With a Travel-Tribes?</h2>
        <ul class="mt-4 space-y-3 text-gray-700">
          <li class="flex gap-3 items-start">
            <span class="font-semibold text-[var(--primary)]">Safety & Confidence:</span>
            <span class="text-gray-600">Profiles are verified, and community ratings help you pick genuine companions.</span>
          </li>
          <li class="flex gap-3 items-start">
            <span class="font-semibold text-[var(--primary)]">Share Costs:</span>
            <span class="text-gray-600">Split transport and accommodation to travel more affordably.</span>
          </li>
          <li class="flex gap-3 items-start">
            <span class="font-semibold text-[var(--primary)]">Better Experiences:</span>
            <span class="text-gray-600">Find people with similar interests — photography, trekking, food tours and more.</span>
          </li>
        </ul>

        <div class="mt-6">
          <a href="/coTraveler" class="btn-accent px-5 py-3 rounded-lg font-semibold">Find Matches</a>
        </div>
      </div>

      <div class="grid gap-4 grid-cols-1 sm:grid-cols-2">
        <div class="p-5 bg-white rounded-xl border">
          <h4 class="font-semibold">Verified IDs</h4>
          <p class="mt-2 text-gray-600 text-sm">Government ID verification & email/phone checks for every profile.</p>
        </div>
        <div class="p-5 bg-white rounded-xl border">
          <h4 class="font-semibold">Community Ratings</h4>
          <p class="mt-2 text-gray-600 text-sm">Ratings & reviews from past co-travelers for better decisions.</p>
        </div>
      </div>
    </div>
  </section>

  <!-- SUCCESS STORIES -->
  <section class="max-w-7xl mx-auto px-6 py-12">
    <h2 class="text-2xl font-bold text-[var(--primary)]">Success Stories</h2>
    <div class="mt-6 grid sm:grid-cols-2 gap-6">
      <div class="p-6 bg-white rounded-2xl border">
        <h3 class="font-semibold">Road Trip Buddies — Pune → Goa</h3>
        <p class="mt-2 text-gray-600 text-sm">“We met on TravelMate and had an incredible 4-day road trip. Split costs, shared playlists and made friends for life!” — Sameer</p>
      </div>
      <div class="p-6 bg-white rounded-2xl border">
        <h3 class="font-semibold">Himalayan Trek Team</h3>
        <p class="mt-2 text-gray-600 text-sm">“Found a small group for the trek. Great company and safe experience.” — Priya</p>
      </div>
    </div>
  </section>

  <!-- FOOTER -->
  <footer class="bg-[var(--primary)] text-white py-10">
    <div class="max-w-7xl mx-auto px-6 grid md:grid-cols-3 gap-6">
      <div>
        <div class="flex items-center gap-3">
          <div class="w-10 h-10 rounded-lg bg-gradient-to-br from-indigo-700 to-indigo-400 flex items-center justify-center font-bold">TM</div>
          <div class="font-semibold text-lg">TravelMate</div>
        </div>
        <p class="mt-3 text-sm text-white/90">Make travel social, safe and memorable.</p>
      </div>

      <div>
        <h4 class="font-semibold">Explore</h4>
        <ul class="mt-3 text-sm space-y-2">
          <li><a href="/destination" class="text-white/90">Destinations</a></li>
          <li><a href="/coTraveler" class="text-white/90">Travel-Tribes</a></li>
          <li><a href="/rentCar" class="text-white/90">Rent a Car</a></li>
        </ul>
      </div>

      <div>
        <h4 class="font-semibold">Get in touch</h4>
        <p class="mt-3 text-sm text-white/90">support@travelmate.example</p>
      </div>
    </div>

    <div class="max-w-7xl mx-auto px-6 mt-8 text-sm text-white/80">
      © 2025 TravelMate. All rights reserved.
    </div>
  </footer>

  <!-- Modal (simple) -->
  <div id="profileModal" class="fixed inset-0 hidden items-center justify-center z-50 bg-black/40">
    <div class="bg-white rounded-2xl max-w-2xl w-full p-6">
      <div class="flex justify-between items-start">
        <div>
          <h3 id="modalName" class="text-2xl font-semibold"></h3>
          <div id="modalMeta" class="text-sm text-gray-500 mt-1"></div>
        </div>
        <button id="modalClose" class="text-gray-500">Close</button>
      </div>

      <div id="modalBody" class="mt-4 text-gray-700"></div>
      <div class="mt-6 text-right">
        <button id="modalConnect" class="px-4 py-2 rounded-lg btn-accent">Send Connect Request</button>
      </div>
    </div>
  </div>

  <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
  <script>
    AOS.init();

    // SIMPLE FILTERING (client-side) -------------------------------------------------
    const txtSearch = document.getElementById('txtSearch');
    const filterDestination = document.getElementById('filterDestination');
    const filterInterest = document.getElementById('filterInterest');
    const filterGender = document.getElementById('filterGender');
    const filterAge = document.getElementById('filterAge');
    const btnReset = document.getElementById('btnReset');

    const profilesGrid = document.getElementById('profilesGrid');
    const profileCards = Array.from(profilesGrid.querySelectorAll('article'));

    function applyFilters(){
      const q = txtSearch.value.trim().toLowerCase();
      const dest = filterDestination.value;
      const interest = filterInterest.value;
      const gender = filterGender.value;
      const age = filterAge.value;

      profileCards.forEach(card => {
        const name = card.dataset.name.toLowerCase();
        const destination = card.dataset.destination;
        const cardInterest = card.dataset.interest;
        const cardGender = card.dataset.gender;
        const cardAge = parseInt(card.dataset.age,10);

        // text search match
        const textMatch = q === "" || name.includes(q) || card.dataset.destination.toLowerCase().includes(q) || card.dataset.interest.toLowerCase().includes(q);

        // destination/interest/gender
        const destMatch = !dest || destination === dest;
        const interestMatch = !interest || cardInterest === interest;
        const genderMatch = !gender || cardGender === gender;
        let ageMatch = true;
        if(age){
          if(age === "18-25") ageMatch = cardAge >= 18 && cardAge <= 25;
          if(age === "26-35") ageMatch = cardAge >= 26 && cardAge <= 35;
          if(age === "36-50") ageMatch = cardAge >= 36 && cardAge <= 50;
          if(age === "50+") ageMatch = cardAge >= 50;
        }

        const show = textMatch && destMatch && interestMatch && genderMatch && ageMatch;
        card.style.display = show ? "" : "none";
      });
    }

    [txtSearch, filterDestination, filterInterest, filterGender, filterAge].forEach(el => {
      el.addEventListener('input', applyFilters);
      el.addEventListener('change', applyFilters);
    });

    btnReset.addEventListener('click', () => {
      txtSearch.value = "";
      filterDestination.value = "";
      filterInterest.value = "";
      filterGender.value = "";
      filterAge.value = "";
      applyFilters();
    });

    // PROFILE MODAL -------------------------------------------------
    const modal = document.getElementById('profileModal');
    const modalName = document.getElementById('modalName');
    const modalMeta = document.getElementById('modalMeta');
    const modalBody = document.getElementById('modalBody');
    const modalClose = document.getElementById('modalClose');

    profilesGrid.addEventListener('click', (e) => {
      const btn = e.target.closest('.viewProfileBtn');
      if(!btn) return;
      const card = btn.closest('article');
      const name = card.dataset.name;
      const dest = card.dataset.destination;
      const interest = card.dataset.interest;
      const gender = card.dataset.gender;
      const age = card.dataset.age;
      modalName.textContent = name;
      modalMeta.textContent = `${age} • ${dest} • ${gender}`;
      modalBody.innerHTML = `
        <p class="text-gray-700">Interests: <strong>${interest}</strong></p>
        <p class="mt-3 text-gray-600">Bio: ${card.querySelector('p').textContent}</p>
      `;
      modal.classList.remove('hidden');
      modal.classList.add('flex');
    });

    modalClose.addEventListener('click', () => {
      modal.classList.add('hidden');
      modal.classList.remove('flex');
    });

    // close when clicking backdrop
    modal.addEventListener('click', (e) => {
      if(e.target === modal) { modal.classList.add('hidden'); modal.classList.remove('flex'); }
    });

  </script>
</body>
</html>
