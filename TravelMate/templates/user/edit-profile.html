<!DOCTYPE html>
{% load static %}
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Edit Profile | TravelMate</title>

  <script src="https://cdn.tailwindcss.com"></script>

  <style>
    body {
      font-family: 'Poppins', sans-serif;
      background: #f3f7f6;
    }
    /* Hide default file input */
    #profileInput {
      display: none;
    }
  </style>
</head>

<body class="py-10">

  <div class="max-w-3xl mx-auto bg-white shadow-xl rounded-3xl p-10">

    <h1 class="text-3xl font-bold text-green-700 mb-6">Edit Profile</h1>

    <form action="{% url 'update_profile' %}" method="POST" enctype="multipart/form-data">
      {% csrf_token %}

      <!-- PROFILE IMAGE PREVIEW -->
      <div class="flex justify-center mb-6 relative">

        <img id="profilePreview"
             src=""
             class="w-36 h-36 rounded-full object-cover border-4 border-green-500 shadow cursor-pointer transition hover:scale-105"
             onclick="document.getElementById('profileInput').click();" />

        <!-- Upload Icon -->
        <div class="absolute bottom-2 right-[42%] bg-green-600 text-white p-2 rounded-full cursor-pointer shadow"
             onclick="document.getElementById('profileInput').click();">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none"
               viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                  d="M4 16v1a2 2 0 002 2h12a2 2 0 002-2v-1M12 12v9m0-9l-3 3m3-3l3 3M16 8a4 4 0 10-8 0 4 4 0 008 0z" />
          </svg>
        </div>

      </div>

      <!-- HIDDEN FILE INPUT -->
      <input id="profileInput" type="file" name="profileImage" accept="image/*"
             onchange="previewImage(event)" />

      <!-- NAME -->
      <label class="font-semibold text-gray-700">Full Name</label>
      <input type="text" name="Name" value="{{ user.Name }}"
             class="w-full border rounded-xl px-4 py-2 mb-4"/>

      <!-- EMAIL -->
      <label class="font-semibold text-gray-700">Email</label>
      <input type="email" name="email" value="{{ user.email }}"
             class="w-full border rounded-xl px-4 py-2 mb-4"/>

      <!-- PHONE -->
      <label class="font-semibold text-gray-700">Phone Number</label>
      <input type="text" name="phoneNumber" value="{{ user.phoneNumber }}"
             class="w-full border rounded-xl px-4 py-2 mb-4"/>

      <!-- GENDER -->
      <label class="font-semibold text-gray-700">Gender</label>
      <select name="gender" class="w-full border rounded-xl px-4 py-2 mb-4">
        <option value="">Select</option>
        <option value="Male" {% if user.gender == "Male" %}selected{% endif %}>Male</option>
        <option value="Female" {% if user.gender == "Female" %}selected{% endif %}>Female</option>
      </select>

      <!-- AGE -->
      <label class="font-semibold text-gray-700">Age</label>
      <input type="number" name="age" value="{{ user.age }}"
             class="w-full border rounded-xl px-4 py-2 mb-4"/>

      <!-- DESTINATION -->
      <label class="font-semibold text-gray-700">Current Destination</label>
      <input type="text" name="destination" value="{{ user.destination }}"
             class="w-full border rounded-xl px-4 py-2 mb-4"/>

      <!-- BIO -->
      <label class="font-semibold text-gray-700">Short Bio</label>
      <textarea name="bio" rows="3"
                class="w-full border rounded-xl px-4 py-2 mb-4">{{ user.bio }}</textarea>

      <!-- ABOUT -->
      <label class="font-semibold text-gray-700">About You</label>
      <textarea name="about" rows="4"
                class="w-full border rounded-xl px-4 py-2 mb-4">{{ user.about }}</textarea>

      <!-- FAVORITE DESTINATIONS -->
      <label class="font-semibold text-gray-700">Favourite Destinations</label>
      <input type="text" name="favDestinations" value="{{ user.favDestinations }}"
             class="w-full border rounded-xl px-4 py-2 mb-4"/>

      <!-- BUDGET -->
      <label class="font-semibold text-gray-700">Budget Range</label>
      <input type="text" name="budgetRange" value="{{ user.budgetRange }}"
             class="w-full border rounded-xl px-4 py-2 mb-4"/>

      <!-- TRAVEL PREFERENCES -->
      <label class="font-semibold text-gray-700">Travel Preferences</label>
      <input type="text" name="travelpreferences" value="{{ user.travelpreferences }}"
             class="w-full border rounded-xl px-4 py-2 mb-6"/>

      <button class="w-full bg-green-600 text-white py-3 rounded-xl text-lg font-semibold hover:bg-green-700 transition">
        Save Changes
      </button>

    </form>

  </div>

  <!-- IMAGE PREVIEW SCRIPT -->
  <script>
    function previewImage(event) {
      const reader = new FileReader();
      reader.onload = function(){
        const img = document.getElementById('profilePreview');
        img.src = reader.result;
      }
      reader.readAsDataURL(event.target.files[0]);
    }
  </script>

</body>
</html>
