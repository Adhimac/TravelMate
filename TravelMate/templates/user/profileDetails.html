<!DOCTYPE html>
{% load static %}
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{{ other_user.Name }} | TravelMate</title>

  <script src="https://cdn.tailwindcss.com"></script>

  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/remixicon@3.5.0/fonts/remixicon.css">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">

  <style>
    body { font-family: "Poppins", sans-serif; background: linear-gradient(to bottom right, #eef2ff, #f9fafb); }
  </style>
</head>

<body class="p-6">

  <a href="{% url 'coTraveler' %}" 
     class="inline-block mb-8 bg-white/70 backdrop-blur-md shadow-md hover:shadow-lg text-gray-700 px-4 py-2 rounded-lg transition">
    <i class="ri-arrow-left-line"></i> Back
  </a>

  <div class="max-w-5xl mx-auto bg-white/40 backdrop-blur-xl shadow-xl rounded-3xl p-10 border border-white/30">

    <div class="flex flex-col md:flex-row items-center md:items-start gap-10">

      <div class="relative">
        <img src="" alt="Profile Picture"
             class="w-44 h-44 rounded-3xl object-cover shadow-xl border-4 border-white/50">
        <span class="absolute -bottom-3 -right-3 bg-green-500 w-6 h-6 rounded-full border-4 border-white shadow"></span>
      </div>

      <div class="flex-1">
        <h1 class="text-4xl font-bold text-gray-800 mb-1">{{ other_user.Name }}</h1>
        <p class="text-gray-500 text-lg mb-4">TravelMate User</p>

        <div class="space-y-2 text-gray-700">
          <p><i class="ri-mail-line text-blue-500"></i> {{ other_user.email }}</p>
          <p><i class="ri-phone-line text-green-500"></i> {{ other_user.phoneNumber }}</p>
        </div>

        <div class="mt-4 flex items-center gap-2">
          <i class="ri-user-line text-purple-500 text-xl"></i>
          <span class="text-gray-700 font-semibold text-lg">{{ other_user.age }} years old</span>
        </div>

        <div class="mt-6 flex flex-wrap gap-4">

          <a href=""
             class="bg-gradient-to-r from-blue-600 to-blue-700 hover:scale-105 transition text-white px-6 py-3 rounded-xl shadow-lg">
              <i class="ri-message-3-line mr-1"></i> Message {{ other_user.Name }}
          </a>

          {% if is_connected %}
              <span class="bg-green-100 text-green-800 px-6 py-3 rounded-xl shadow flex items-center">
                  <i class="ri-user-follow-line mr-1"></i> Connected
              </span>

          {% elif is_pending %}
              <form method="POST" action="{% url 'cancel_connection' other_user.id %}">
                  {% csrf_token %}
                  <button class="bg-yellow-500 text-white px-6 py-3 rounded-xl shadow-lg hover:bg-yellow-600">
                      <i class="ri-time-line mr-1"></i> Cancel Request
                  </button>
              </form>

          {% else %}
              <form method="POST" action="{% url 'connect_traveler' other_user.id %}">
                  {% csrf_token %}
                  <button class="bg-gradient-to-r from-green-500 to-green-600 hover:scale-105 transition text-white px-6 py-3 rounded-xl shadow-lg flex items-center">
                      <i class="ri-user-add-line mr-1"></i> Connect
                  </button>
              </form>
          {% endif %}

        </div>

      </div>
    </div>

    <div class="my-10 border-t border-gray-300/40"></div>

    <div class="mb-10">
      <h2 class="text-2xl font-semibold text-gray-800 mb-4 flex items-center gap-2">
        <i class="ri-information-line text-indigo-500"></i> About
      </h2>

      <p class="text-gray-700 leading-relaxed bg-white/60 backdrop-blur-md p-5 rounded-xl shadow">
{{ other_user.bio|default:other_user.about|default:"This user hasn't written a bio yet." }}
      </p>
    </div>

    <div class="mb-10">
      <h2 class="text-2xl font-semibold text-gray-800 mb-4 flex items-center gap-2">
        <i class="ri-compass-3-line text-purple-500"></i> Travel Preferences
      </h2>

      <div class="grid md:grid-cols-3 gap-6">

        <div class="bg-white/60 p-6 rounded-2xl shadow hover:shadow-lg transition">
          <p class="text-gray-400 text-sm mb-1">Preferred Travel Type</p>
          <p class="text-gray-700 font-medium">{{ other_user.travelpreferences }}</p>
        </div>

        <div class="bg-white/60 p-6 rounded-2xl shadow hover:shadow-lg transition">
          <p class="text-gray-400 text-sm mb-1">Budget Range</p>
          <p class="text-gray-700 font-medium">{{ other_user.budgetRange }}</p>
        </div>

        <div class="bg-white/60 p-6 rounded-2xl shadow hover:shadow-lg transition">
          <p class="text-gray-400 text-sm mb-1">Favorite Destinations</p>
          <p class="text-gray-700 font-medium">{{ other_user.favDestinations }}</p>
        </div>

      </div>
    </div>

    <div>
      <h2 class="text-2xl font-semibold text-gray-800 mb-4 flex items-center gap-2">
        <i class="ri-road-map-line text-red-500"></i> Past Trips
      </h2>

      <div class="bg-white/60 p-6 rounded-2xl shadow">

        {% if user_trips %}
          <ul class="list-disc ml-6 text-gray-700 space-y-1">
            {% for trip in user_trips %}
              <li>{{ trip.destination }} â€” {{ trip.date }}</li>
            {% endfor %}
          </ul>

        {% else %}
          <p class="text-gray-500">No past trips listed.</p>
        {% endif %}

      </div>
    </div>

  </div>

</body>
</html>
