<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Edit Car | TravelMate</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-gray-100">

<div class="max-w-3xl mx-auto mt-12 bg-white p-8 rounded-3xl shadow">

  <h1 class="text-2xl font-bold text-gray-800 mb-6">
    Edit Car Details
  </h1>

  <!-- üîî PROFESSIONAL MESSAGES -->
{% if messages %}
<div class="mb-6 space-y-4">
  {% for message in messages %}
    <div class="flex items-start gap-3 p-4 rounded-xl shadow-sm border text-sm font-medium
      {% if message.tags == 'success' %}
        bg-green-50 text-green-800 border-green-200
      {% elif message.tags == 'error' %}
        bg-red-50 text-red-800 border-red-200
      {% elif message.tags == 'warning' %}
        bg-yellow-50 text-yellow-800 border-yellow-200
      {% else %}
        bg-blue-50 text-blue-800 border-blue-200
      {% endif %}
    ">

      <!-- Icon -->
      <div>
        {% if message.tags == 'success' %}
          ‚úÖ
        {% elif message.tags == 'error' %}
          ‚ùå
        {% elif message.tags == 'warning' %}
          ‚ö†
        {% else %}
          ‚Ñπ
        {% endif %}
      </div>

      <!-- Message Text -->
      <div class="flex-1">
        {{ message }}
      </div>

    </div>
  {% endfor %}
</div>
{% endif %}

  <form method="POST" enctype="multipart/form-data" class="space-y-4">
    {% csrf_token %}

    <input type="text" name="vehicleName" value="{{ car.vehicleName }}"
           class="w-full border rounded-xl px-4 py-2" placeholder="Vehicle Name" required>

    <input type="text" name="vehicleType" value="{{ car.vehicleType }}"
           class="w-full border rounded-xl px-4 py-2" placeholder="Vehicle Type" required>

    <input type="text" name="vehicleNumber" value="{{ car.vehicleNumber }}"
           class="w-full border rounded-xl px-4 py-2" placeholder="Vehicle Number" required>

    <input type="text" name="fuelType" value="{{ car.fuelType }}"
           class="w-full border rounded-xl px-4 py-2" placeholder="Fuel Type" required>

    <input type="number" name="seatingCapacity" value="{{ car.seatingCapacity }}"
           class="w-full border rounded-xl px-4 py-2" placeholder="Seating Capacity" required>

    <input type="number" name="rentPerDay" value="{{ car.rentPerDay }}"
           class="w-full border rounded-xl px-4 py-2" placeholder="Rent per Day" required>

    <div class="flex items-center gap-2">
      <input type="checkbox" name="availabilityStatus"
             {% if car.availabilityStatus %}checked{% endif %}>
      <label class="text-gray-700">Available for booking</label>
    </div>

  <!-- Car Image Upload -->
<div>
  <label class="block text-sm font-medium text-gray-700 mb-2">
    Car Image
  </label>

  <div class="relative w-full h-56 rounded-2xl border-2 border-dashed border-gray-300 overflow-hidden bg-gray-50 hover:border-indigo-500 transition">

    <!-- Image Preview -->
    <img id="imagePreview"
         src="{% if car.vehicleImage %}{{ car.vehicleImage.url }}{% else %}https://source.unsplash.com/600x400/?car{% endif %}"
         class="w-full h-full object-cover">

    <!-- Overlay -->
    <div class="absolute inset-0 bg-black/40 opacity-0 hover:opacity-100 transition flex items-center justify-center">
      <label class="cursor-pointer text-white font-semibold px-5 py-2 bg-indigo-600 rounded-xl shadow">
        Change Image
        <input type="file"
               name="vehicleImage"
               accept="image/*"
               class="hidden"
               onchange="previewImage(event)">
      </label>
    </div>

  </div>

  <p class="text-xs text-gray-500 mt-2">
    JPG, PNG or WEBP ‚Ä¢ Recommended size: 1200√ó800
  </p>
</div>


    <div class="flex justify-between mt-6">
      <a href="{% url 'myCars' %}" class="text-gray-500">Cancel</a>
      <button type="submit"
              class="px-6 py-2 bg-indigo-600 text-white rounded-xl hover:bg-indigo-700">
        Save Changes
      </button>
    </div>

  </form>

</div>

</body>
<script>
  function previewImage(event) {
    const image = document.getElementById('imagePreview');
    const file = event.target.files[0];

    if (file) {
      image.src = URL.createObjectURL(file);
    }
  }
</script>

</html>
