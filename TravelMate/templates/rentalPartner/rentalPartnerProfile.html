<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Rental Partner Profile | TravelMate</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>

  <style>
    body {
      font-family: "Poppins", sans-serif;
      background: linear-gradient(135deg, #e0e7ff, #fdf2f8);
    }
    .btn-accent {
      background: linear-gradient(90deg, #3420b1, #1eaad9);
      color: white;
      font-weight: 600;
      border-radius: 8px;
      transition: 0.25s;
    }
  </style>
</head>
<body>

<div class="max-w-5xl mx-auto p-6">

  <!-- ================= TOP PROFILE CARD ================= -->
  <div class="bg-white rounded-3xl shadow-xl p-6 flex flex-col md:flex-row gap-6 items-center">

{% if pro.image %}
  <div class="relative">
    <img src="{{ pro.image.url }}" alt="Profile Image"
         class="w-36 h-36 rounded-2xl object-cover shadow-lg">
    <span class="absolute bottom-2 right-2 bg-green-500 w-4 h-4 rounded-full border-2 border-white"></span>
  </div>
{% else %}
  <div class="relative">
    <img src="https://thumbs.dreamstime.com/b/businessman-avatar-image-beard-hairstyle-male-profile-vector-illustration-178545831.jpg"
         alt="Default Profile Image"
         class="w-36 h-36 rounded-2xl object-cover shadow-lg">
    <span class="absolute bottom-2 right-2 bg-green-500 w-4 h-4 rounded-full border-2 border-white"></span>
  </div>
{% endif %}

 
    <div class="flex-1 text-center md:text-left">
      <h2 class="text-2xl font-bold text-gray-800">{{ partner.combanyName }}</h2>
      <p class="text-gray-500">Rental Partner • {{ pro.city }}</p>

      <div class="mt-3 flex flex-wrap gap-3 justify-center md:justify-start">
        {% if pro.verified %}
          <span class="px-3 py-1 text-sm rounded-full bg-green-100 text-green-700">✔ Verified</span>
        {% else %}
          <span class="px-3 py-1 text-sm rounded-full bg-red-100 text-red-700">Not Verified</span>
        {% endif %}
      </div>
    </div>

    <div class="flex flex-col gap-2">
      <button onclick="openEditModal()"
        class="px-5 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-xl shadow">
        Edit Profile
      </button>
     <a href="myCars"
             class="btn-accent px-4 py-2 text-sm">
        Manage Cars
          </a>
    </div>
  </div>

  <!-- ================= DETAILS ================= -->
  <div class="grid md:grid-cols-2 gap-6 mt-8">

    <div class="bg-white rounded-2xl shadow p-6">
      <h3 class="text-lg font-semibold mb-4">Business Details</h3>
      <p><strong>Owner:</strong> {{ pro.name }}</p>
      <p><strong>Company:</strong> {{ pro.combanyName }}</p>
      <p><strong>GST:</strong> {{ pro.GST_number|default:"Not Provided" }}</p>
      <p><strong>Location:</strong> {{ pro.city }}, {{ pro.state }} ,{{ pro.Address }}</p>
    </div>

    <div class="bg-white rounded-2xl shadow p-6">
      <h3 class="text-lg font-semibold mb-4">Contact Details</h3>
      <p><strong>Phone:</strong> {{ pro.mobileNumber }}</p>
      <p><strong>Email:</strong> {{ pro.email }}</p>
      <p><strong>Support:</strong> 24×7</p>
    </div>

  </div>

</div>

<!-- ================= EDIT PROFILE MODAL ================= -->
<div id="editProfileModal"
     class="fixed inset-0 z-50 hidden items-center justify-center bg-black/50 backdrop-blur-sm">

  <div class="bg-white w-full max-w-2xl rounded-3xl shadow-2xl p-6 relative">

    <button onclick="closeEditModal()"
            class="absolute top-4 right-4 text-gray-400 hover:text-gray-600 text-xl">
      ✕
    </button>

    <h2 class="text-2xl font-bold mb-6">Edit Profile</h2>

    <form method="post" enctype="multipart/form-data" class="grid md:grid-cols-2 gap-4">
      {% csrf_token %}
      <!-- Profile Image Upload -->
<div class="md:col-span-2 flex flex-col items-center gap-4">

  <!-- Preview -->
  <div class="relative">
    <img id="profilePreview"
         src=""
         class="w-32 h-32 rounded-2xl object-cover shadow-lg border">
    
    <label for="profileImage"
           class="absolute bottom-2 right-2 bg-indigo-600 hover:bg-indigo-700
                  text-white text-xs px-3 py-1 rounded-lg cursor-pointer shadow">
      Change
    </label>
  </div>

  <!-- Hidden File Input -->
  <input type="file"
         id="profileImage"
         name="profileImage"
         accept="image/*"
         class="hidden"
         onchange="previewProfileImage(event)">
</div>


      <input type="text" name="name" value="{{ pro.name }}" placeholder="Name"
        class="px-4 py-2 border rounded-xl">

      <input type="email" name="email" value="{{ pro.email }}" placeholder="Email"
        class="px-4 py-2 border rounded-xl">

      <input type="text" name="mobileNumber" value="{{ pro.mobileNumber }}" placeholder="Mobile Number"
        class="px-4 py-2 border rounded-xl">

      <input type="text" name="aadharId" value="{{ partner.aadharId }}" placeholder="Aadhaar ID"
        class="px-4 py-2 border rounded-xl">

      <input type="text" name="combanyName" value="{{ partner.combanyName }}" placeholder="Company Name"
        class="px-4 py-2 border rounded-xl">

      <input type="text" name="GST_number" value="{{ partner.GST_number }}" placeholder="GST Number"
        class="px-4 py-2 border rounded-xl">

      <input type="text" name="city" value="{{ partner.city }}" placeholder="City"
        class="px-4 py-2 border rounded-xl">

      <input type="text" name="state" value="{{ partner.state }}" placeholder="State"
        class="px-4 py-2 border rounded-xl">

      <textarea name="address" placeholder="Address"
        class="md:col-span-2 px-4 py-2 border rounded-xl">{{ partner.address }}</textarea>

      <div class="md:col-span-2 flex justify-end gap-3">
        <button type="button" onclick="closeEditModal()"
          class="px-5 py-2 bg-gray-100 rounded-xl">
          Cancel
        </button>
        <button type="submit"
          class="px-6 py-2 bg-indigo-600 text-white rounded-xl shadow">
          Save
        </button>
      </div>
    </form>
  </div>
</div>

<!-- ================= JS ================= -->
<script>
  function openEditModal() {
    const modal = document.getElementById('editProfileModal');
    modal.classList.remove('hidden');
    modal.classList.add('flex');
  }

  function closeEditModal() {
    const modal = document.getElementById('editProfileModal');
    modal.classList.add('hidden');
    modal.classList.remove('flex');
  }
</script>

</body>
</html>
